(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),o=t.n(c),a=t(6),r=t(3),u=t(2),i=t(4),s=t.n(i),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},j=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},h=t(0),O=function(e){var n=e.message,t=e.typeM;return null===n?null:(console.log("Notification comp, typeM=",t),Object(h.jsx)("div",{className:t,children:n}))},m=function(e){return Object(h.jsxs)("button",{onClick:e.onClickEv,children:[" ",e.textB," "]})},p=function(e){var n=e.content,t=e.onClickE,c=e.text;return Object(h.jsx)("div",{children:Object(h.jsx)("ul",{style:{listStyle:"none"},children:n.map((function(e){return Object(h.jsxs)("li",{children:[e.name," ",e.number,Object(h.jsx)(m,{onClickEv:function(){return t(e.id,e.name)},textB:c})]},e.id)}))})})},v=function(e){return Object(h.jsxs)("div",{children:["filter:",Object(h.jsx)("input",{value:e.value,onChange:e.handleChange})]})},x=function(e){return Object(h.jsxs)("form",{onSubmit:e.addNameApp,children:[Object(h.jsxs)("div",{children:["debug: ",e.value1]}),Object(h.jsxs)("div",{children:["name:",Object(h.jsx)("input",{value:e.value1,onChange:e.onChange1})]}),Object(h.jsxs)("div",{children:["number:",Object(h.jsx)("input",{value:e.value2,onChange:e.onChange2})]}),Object(h.jsx)("button",{type:"submit",children:"ADD"})]})},C=function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),i=Object(r.a)(o,2),s=i[0],l=i[1],m=Object(u.useState)(""),C=Object(r.a)(m,2),g=C[0],w=C[1],k=Object(u.useState)(""),y=Object(r.a)(k,2),S=y[0],E=y[1],L=Object(u.useState)(null),D=Object(r.a)(L,2),N=D[0],A=D[1],B=Object(u.useState)("positive"),M=Object(r.a)(B,2),T=M[0],J=M[1];Object(u.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var I=function(e,n){var o=t.find((function(n){return n.id===e})),r=Object(a.a)(Object(a.a)({},o),{},{name:o.name,number:n});b(e,r).then((function(n){c(t.map((function(t){return t.id!==e?t:n})))})).catch((function(n){J("error"),A("The note '".concat(o.name,"' was already deleted from server")),setTimeout((function(){A(null)}),5e3),c(t.filter((function(n){return n.id!==e})))}))},P=t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(O,{message:N,typeM:T}),Object(h.jsx)(v,{value:S,handleChange:function(e){E(e.target.value)}}),Object(h.jsx)("h2",{children:"add a new"}),Object(h.jsx)(x,{value1:s,value2:g,addNameApp:function(e){e.preventDefault();var n=t.map((function(e){return e.name.toLowerCase()}));if(J("positive"),n.includes(s.toLowerCase())){var o=t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()}));window.confirm("".concat(o.name," is already in phonebook. Do you want to update number?"))&&I(o.id,g),A("".concat(s," phone number is updated")),l(""),w("")}else{j({name:s,number:g}).then((function(e){c(t.concat(e)),A("contact ".concat(s,"  is added into phonebook")),l(""),w("")})).catch((function(e){console.log(e.response.data.error),J("error"),A(e.response.data.error)}))}setTimeout((function(){A(null)}),5e3)},onChange1:function(e){l(e.target.value)},onChange2:function(e){w(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(p,{content:P,onClickE:function(e,n){window.confirm("Delete ".concat(n,"?"))&&(f(e).then((function(){c(t.filter((function(n){return!(n.id===e)})))})),l(""),w(""))},text:"delete"})]})};t(39);o.a.render(Object(h.jsx)(C,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.6c77bbb2.chunk.js.map